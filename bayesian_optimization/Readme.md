# CTLearn Optimizer GSOC

Proof of concept framework for optimizing CTLearn models.

Enable Tree Parzen Estimator based Bayesian Optimization using [hyperopt](https://github.com/hyperopt/hyperopt) package.

This aims to be a code example for applying for [CTLearn - Optimization GSOC proyect](https://openastronomy.org/gsoc/gsoc2019/#/projects?project=optimization).

### Prerequisites

```
CTLearn, hyperopt, sklearn, multiprocessing, os, re , yaml, numpy, logging, pickle, csv, timeit, operator, argsparse, os, functools, shutils
```

### Installing

1. Install the prerequisites (anaconda or conda is suggested).
2. Download this package.
3. Run `python setup.py install` from the root folder.

## Basic usage: Perform optimization run

1. Create a folder, cd to it
2. You will need both `myconfig.yml` (CTLearn config) and `opt_config.yml` (CTLearn Optimizer config) files. Examples are provided.
3. Run `python PATH/TO/PROJECT/ctlearn_optimizer/optimizer.py opt_config.yml myconfig.yml`. 

## Basic usage

The outputs of a optimization session are:

  `optimization.log` file containg messages about the optimization run.

  `checking_file.csv ` file containing metric scores, hyperparameters and iteration numbers. This file is updated each iteration.

  `checking_trials.pkl` file containing info for enabling hyperopt to resume from previous runs. Updated each iteration.

  `trials.pkl` file containing info for enabling hyperopt to resume from previous runs. Generated at the end of the optimization run.

  `runX` folders containing Tensorflow files generated by CTLearn.

## Authors

* **[Juan Alfonso Redondo Pizarro](https://github.com/juan-redondo/ctlearn)**

## License

This project is licensed under BSD-3-Clause.


